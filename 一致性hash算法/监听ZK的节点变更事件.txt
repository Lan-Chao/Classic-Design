

// 对于节点增加默认监听器
PathChildrenCache watcher = new PathChildrenCache(client, rootPath, true, false, executorService);
watcher.getListenable().addListener((curatorFramework, pathChildrenCacheEvent) -> {
   switch (pathChildrenCacheEvent.getType()) {
     case CHILD_ADDED:
     // 节点增加
     nodeHolder.addPhyNode(getNodePath(pathChildrenCacheEvent.getData().getPath()));
     break;
     case CHILD_REMOVED:
     // 节点删除
     nodeHolder.delPhyNode(getNodePath(pathChildrenCacheEvent.getData().getPath()));
     break;
     default:
     break;
   }
});
try {
  watcher.start();
} catch (Exception e) {
  log.error("子节点状态监听器启动失败: {}", e.getMessage());
}
